<import src="../common.wxml"/>

<template name="evaluation">
    <view class="mod-view mod-evaluation" wx:if="{{data && data.length > 0}}">
        <view class="mod-head">用户评论</view>
        <view>
            <view class="mod-evaluation-li" wx:for="{{data}}" wx:for-index="evaIdx" wx:key="{{evaIdx}}">
                <view class="mod-evaluation-avatar">
                    <image class="mod-evaluation-avatar-img" mode="aspectFill" src="https://pic8.58cdn.com.cn/bizmp/n_v285d6a16d725a446694db35df23c9db24.png?w=100&h=100"/>
                </view>
                <view class="mod-evaluation-content">
                    <view class="mod-evaluation-name">{{item.tel}}</view>
                    <template is="star" data="{{star: item.star}}" />
                    <view class="mod-evaluation-desc">{{item.desc}}</view>
                    <view bindtap="evaluationImgTap" data-mod-index="{{index}}" data-eva-idx="{{evaIdx}}" >
                        <image class="mod-evaluation-img" src="{{item.indexOf('https') === 0 ? item : ('https:' + item)}}?w=160&h=160" mode="aspectFill" 
                            wx:for="{{item.imgs}}" wx:key="{{index}}" wx:for-index="evaImgIdx" data-index="{{evaImgIdx}}" />
                    </view>
                </view>
            </view>
        </view>
        <view class="mod-more" bindtap="loadMore" wx:if="{{data.length === pageNum * pageSize}}" 
            data-index="{{index}}" data-evaluation-page="{{pageNum+1}}" data-type="evaluation" 
            data-evaluation-size="{{pageSize}}" data-total="{{total}}">查看更多</view>
    </view>
</template>