"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function r(i,a){try{var o=t[i](a),s=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(s).then(function(e){r("next",e)},function(e){r("throw",e)});e(s)}return r("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_ajax=require("./../utils/ajax.js"),_globalService=require("./../utils/globalService.js"),_globalService2=_interopRequireDefault(_globalService),config={region:{size:3,apiList:["/local/provinces","/local/citys/","/local/areas/"],formatFunction:function(e,t){var n=this.apiList[e];return 0===e?n:n+t},showProp:"localName",priKey:"dispLocalID",selectAction:function(e,t){var n=this.result,r=e.dispLocalID,i=e.localName;n||(n={}),0===t&&Object.assign(n,{province:r,provinceStr:i}),1===t&&Object.assign(n,{city:r,cityStr:i}),2===t&&Object.assign(n,{area:r,areaStr:i}),this.result=n}},trade:{size:3,apiList:["/cate/dispcate/byparentid","/cate/dispcate/byparentid","/cate/dispcate/byparentid"],formatFunction:function(e){return this.apiList[e]},getData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=_wepy2.default.getStorageSync("current_mpid");return 0===e?{mpid:n}:{parentid:t}},priKey:"cateId",showProp:"name",selectAction:function(e,t){var n=this.result,r=e.cateId,i=e.name;n||(n={}),0===t&&Object.assign(n,{cate1:r,cate1Name:i}),1===t&&Object.assign(n,{cate2:r,cate2Name:i}),2===t&&Object.assign(n,{cate3:r,cate3Name:i})}}},Index=function(e){function t(){var e,n,r,i;_classCallCheck(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=_possibleConstructorReturn(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.config={navigationBarTitleText:"选择"},r.data={size:3,columnIds:[],apiList:[],contentList:[],type:"region",showProp:"",priKey:"",boldColumn:0,result:{}},r.methods={selectItem:function(){function e(e,n){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){var r,i,a,o,s,c,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=+t,i=+n,a=this.contentList[r]||[],o=a[i]||{},s=o[this.priKey],this.boldColumn=+t+1,a.forEach(function(e){e.checked=!1}),o.checked=!0,this.selectAction&&this.selectAction(o,r),!(+r<this.size-1)){e.next=19;break}return e.next=12,_ajax.get.apply(void 0,_toConsumableArray(this.getHttpParams(r+1,s)));case 12:for(c=e.sent,u=c.data,this.contentList[r+1]=u,u&&u.length||this.successAction(),l=r+2;l<this.size;l+=1)this.contentList[l]=[];e.next=20;break;case 19:this.successAction();case 20:this.$apply();case 21:case"end":return e.stop()}},e,this)}));return e}()},i=n,_possibleConstructorReturn(r,i)}return _inherits(t,e),_createClass(t,[{key:"successAction",value:function(){_globalService2.default.set("multiSelector",this.result),console.log(this.result),setTimeout(function(){_wepy2.default.navigateBack()},300)}},{key:"getHttpParams",value:function(e,t){return[this.getFormatUrl(e,t),this.getData&&this.getData(e,t)||{}]}},{key:"onLoad",value:function(){function e(e){return t.apply(this,arguments)}var t=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,r,i,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.type,r=void 0===n?"region":n,this.type=r,i=0;i<this.columnIds.length;i+=1)this.contentList[i]=[];return this.loadConfig(config[r]),e.next=6,_ajax.get.apply(void 0,_toConsumableArray(this.getHttpParams(0)));case 6:a=e.sent,o=a.data,this.contentList[0]=o,this.$apply();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"loadConfig",value:function(e){if(e){var t=e.apiList,n=e.showProp,r=e.priKey,i=e.type,a=e.size,o=e.formatFunction,s=void 0===o?function(){}:o,c=e.selectAction,u=void 0===c?function(){}:c,l=e.getData,p=void 0===l?function(){}:l;Object.assign(this,{apiList:t,showProp:n,priKey:r,type:i,size:a,getFormatUrl:s.bind(this),selectAction:u.bind(this),getData:p.bind(this)}),this.$apply()}}}]),t}(_wepy2.default.page);Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(Index,"pages/multiSelector"));