
    <view class="container">
        <view  wx:if="{{ coupons && coupons.length }}">
            
    <view class="coupons {{$couponList$size === \'small\' ? 'small' : ''}}" >
        <block wx:for="{{ $couponList$coupons }}" wx:for-index="$couponList$index" wx:for-item="$couponList$item" wx:key="$couponList$id">
            <navigator class="coupon-list-item {{!$couponList$item.usable ? 'unable' : ''}} {{$couponList$isEditing ? 'editing' : ''}}" url="{{ '/pages/couponEdit?id=' + $couponList$item.id }}">
                <view class="coupon-list-left">
                    <!-- 打折 -->
                    <view class="discount"  wx:if="{{ $couponList$item.couponType === 2 }}">
                        <text class="bold">{{ $couponList$item.couponDiscard / 10 || 9 }}</text>折
                    </view>
                    <!-- 满减 -->
                    <view class="reduce"  wx:else>
                        ￥<text class="bold">{{ $couponList$item.reliefAmount }}</text>
                    </view>
                </view>
                <view class="coupon-list-middle">
                    <view class="info">
                        <view class="title">满{{ $couponList$item.limitAmount }}可用</view>
                        <view class="type">{{ $couponList$item.subTitle }}</view>
                        <!-- 固定时间类型 -->
                        <view class="time" wx:if="{{ $couponList$item.validType === 1}}">
                            {{ $couponList$item.validStarttime }}-{{ $couponList$item.validEndtime }}
                        </view>
                        <!-- 领取后生效 -->
                        <view class="time" wx:else>
                            领取后{{ $couponList$item.validAfterDays ? ($couponList$item.validAfterDays + '天') : '立即' }}生效
                        </view>
                    </view>
                    <view class="disable" wx:if="{{ !$couponList$item.usable }}">
                        已失效
                    </view>
                </view>
                <view class="coupon-list-right">
                    <view>
                        已领取
                        <view class="count">
                            {{ $couponList$item.getCount }}张
                        </view>
                    </view>
                    <view>
                        已使用
                        <view class="count">
                            {{ $couponList$item.useCount }}张
                        </view>
                    </view>
                </view>
                <view class="checkbox {{$couponList$item.checked ? 'checked' : ''}}">
                </view>
                <view class="mask" catchtap="$couponList$chooseCoupon" wx:if="{{ $couponList$isEditing }}" data-wpychoosecoupon-a="{{ $couponList$index }}"/>
            </navigator>
        </block>
    </view>

        </view>
        <view wx:else>
            <view class="coupons-empty">
                <image class="empty-image" src="https://img.58cdn.com.cn/lbg/jianzhan/images/empty.png"/>
                <view>暂无优惠卷</view>
            </view>
        </view>

        <view class="options">
            <button class="edit" bindtap="edit">{{ isEditing ? '取消' : '编辑' }}</button>
            <button wx:if="{{ isEditing }}" bindtap="deleteItems">删除</button>
            <button wx:else bindtap="addCoupon">添加优惠券</button>
        </view>
    </view>