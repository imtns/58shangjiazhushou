"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.moduleCfgParse=exports.moduleDataParse=void 0;var _index=require("./index.js"),moduleDataParse=exports.moduleDataParse=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{data:[]};if(~["services","serviceOther"].indexOf(e)&&(a.data&&a.data.length>0?a.data.forEach(function(e){e.img=(0,_index.picSrcDomain)()+e.img}):a=Object.assign({},{page:0,size:0,total:0,data:[]},a)),"coupon"===e)if(a.data)for(var t=0;t<a.data.length;t+=1)!function(e){var t=JSON.parse(a.data[e].couponCondition);Object.keys(t).forEach(function(r){a.data[e][r]=t[r]})}(t);else a.data=[];return"article"===e&&a.data.length>0&&a.data.forEach(function(e){e.cover=(0,_index.picSrcDomain)()+e.cover}),"order"===e&&a.data.length>0&&a.data.forEach(function(e){e.pics=(0,_index.picSrcDomain)()+e.pics}),void 0!==a.data&&null!==a.data||Object.assign(a,{data:[]}),a},moduleCfgParse=exports.moduleCfgParse=function(e,a){var t="string"==typeof a?JSON.parse(a):a;if(~["images","imageSwiper","banner"].indexOf(e)&&(t.images=t.images?t.images:[],t.images.length>0&&(t.images=t.images.filter(function(e){return e.fullPath=(0,_index.picSrcDomain)()+e.src,e.src})),0===t.images.length&&t.images.push({fullPath:"//pic8.58cdn.com.cn/bizmp/n_v285d6a16d725a446694db35df23c9db24.png"})),"images"===e){var r=[{theme:"1",showSize:"2",title:"一行1张显示"},{theme:"2",showSize:"4",title:"一行2张显示"},{theme:"3",showSize:"6",title:"一行3张显示"},{theme:"4",showSize:"3",title:"1左2右显示"},{theme:"5",showSize:"3",title:"1上2下显示"},{theme:"6",showSize:"4",title:"1上3下显示"},{theme:"7",showSize:"4",title:"一行4张显示"},{theme:"8",showSize:"2",title:"双图"}];t.theme=t.theme?t.theme.toString():"1",t.showSize=r[t.theme-1].showSize||4}return t};exports.default={parsePageData:function(e){return e.map(function(e){var a={},t={};try{a=e.props.cfg||{},t=e.params?JSON.parse(e.params):{}}catch(a){console.log("json error\n",e.props.cfg,"params error\n",e.params)}e.cfg=a,e.params=t;var r=e.name,i=e.cfg,n=e.cfg.title;return i.title=n||r,moduleCfgParse(r,i),e})},show:function(e){var a=e.modules;return a?a.map(function(e){var a={},t={};try{a=e.cfg?JSON.parse(e.cfg):{},t=e.params?JSON.parse(e.params):{}}catch(a){console.log("json error\n",e.cfg,"params error\n",e.params)}e.cfg=a,e.params=t;var r=e.name,i=e.cfg,n=e.cfg.title;i.title=n||r;var s=e.data[r]||{};return e.data=moduleDataParse(r,s),moduleCfgParse(r,i),e}):[]},save:function(e){return e.map(function(e){var a=e.name,t=e.cfg;return~["images","imageSwiper","banner"].indexOf(a)&&(t.images=t.images||[],t.images=t.images.filter(function(e){return e.src}).map(function(e){return delete e.fullPath,e})),e})}};