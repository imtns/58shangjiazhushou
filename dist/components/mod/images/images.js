"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0});var _index=require("./../../../utils/index.js"),_getRoute=require("./../../../utils/getRoute.js"),_getPage=require("./../../../utils/getPage.js"),_getPage2=_interopRequireDefault(_getPage),ENUM_THEME=["zero","one","two","three","four","five","six","seven","eight"],CLIP_SIZE=["?w=690&h=690","?w=690&h=510","?w=336&h=252","?w=220&h=164",[["?w=363&h=482","?w=309&h=231","?w=309&h=231"],["?w=388&h=514","?w=284&h=214","?w=284&h=214"]],["?w=690&h=388","?w=336&h=252","?w=336&h=252"],["?w=690&h=388","?w=218&h=164","?w=218&h=164"],["?w=160&h=160"],["?w=336&h=448"]];exports.default={imagesViewState:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,a=e.length;t<a;t++){if("images"===e[t].name){var s=e[t].props.cfg;void 0===s.theme&&(s.theme="2"),this.imagesConfState(s),this.imageState(s)}}},imagesConfState:function(e){var t=e.theme,a=e.hasMore,s=void 0===a||a,o=e.images,i={styleName:"",maxNum:0,showMore:!0};switch(t){case"1":case"2":case"3":i.styleName=ENUM_THEME[t],i.showMore=s&&o.length>2*t,i.maxNum=i.showMore?2*t:o.length;break;case"4":i.styleName=o[0].title?ENUM_THEME[t]+"plus":ENUM_THEME[t],i.showMore=s&&o.length>3,i.maxNum=i.showMore?3:o.length;break;case"5":i.styleName=ENUM_THEME[t],i.showMore=s&&o.length>3,i.maxNum=i.showMore?3:o.length;break;case"6":case"7":i.styleName=ENUM_THEME[t],i.showMore=s&&o.length>4,i.maxNum=i.showMore?4:o.length;break;case"8":i.styleName=ENUM_THEME[t],i.showMore=s&&o.length>2,i.maxNum=i.showMore?2:o.length}Object.assign(e,i)},imageState:function(e){for(var t=e.images,a=e.theme,s=e.styleName,o=0,i=t.length;o<i;o++){var r={src:t[o].src,itemClass:"",itemIndex:0},l=~o%3==0?3:-~o%3;switch(a){case"1":case"2":case"3":r.src+=CLIP_SIZE[a],r.itemClass=~o%a==0?"mod-li-box-"+a+" mod-li-box-last":"mod-li-box-"+a;break;case"4":r.src+=CLIP_SIZE[4][s.indexOf("plus")>-1?1:0][l-1],r.itemIndex=l,r.itemClass=l>1?"mod-li-box-"+s+"-"+l+" mod-li-box-last":"mod-li-box-"+s+"-"+l;break;case"5":r.itemIndex=l,r.src+=CLIP_SIZE[a][l-1],r.itemClass=l>2?"mod-li-box-"+s+"-"+l+" mod-li-box-last":"mod-li-box-"+s+"-"+l;break;case"6":l=~o%4==0?4:-~o%4,r.src+=CLIP_SIZE[a][l-1],r.itemIndex=l,r.itemClass=l>3?"mod-li-box-"+s+"-"+l+" mod-li-box-last":"mod-li-box-"+s+"-"+l;break;case"7":r.src+=CLIP_SIZE[a],r.itemClass=~o%4==0?"mod-li-box-"+a+" mod-li-box-last":"mod-li-box-"+a;break;case"8":r.src+=CLIP_SIZE[a],r.itemClass=~o%2==0?"mod-li-box-"+a+" mod-li-box-last":"mod-li-box-"+a}Object.assign(t[o],r)}},onImageClick:function(e){var t=e.currentTarget.dataset,a=t.index,s=t.current,o=t.pagekey;if(o&&""!==o){var i=(0,_getRoute.getRoute)(o);if((0,_getPage2.default)(this.route)===o)return;(0,_getRoute.navigateTo)(i)}else{var r=this.data.page_data[s].props.cfg.images.map(function(e){return e.src});(0,_index.previewImage)(r,a)}}};